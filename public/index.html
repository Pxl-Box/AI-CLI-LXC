<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Terminal Workspace</title>

    <!-- xterm.css -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.css" />

    <!-- Custom Styles -->
    <link rel="stylesheet" href="style.css?v=1.1">

    <!-- Google Fonts for typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Fira+Code:wght@400;500&display=swap"
        rel="stylesheet">
</head>

<body>

    <div class="workspace-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="header-title">
                    <h2>AI Workspace</h2>
                    <button id="btn-settings" class="icon-btn" title="Workspace Settings">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path
                                d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z" />
                            <circle cx="12" cy="12" r="3" />
                        </svg>
                    </button>
                </div>
                <div class="status-indicator">
                    <span class="dot online"></span>
                    <span class="status-text">Connected</span>
                    <span class="cwd-text" id="current-dir">~</span>
                </div>
                <div class="header-actions">
                    <button id="btn-upload" class="icon-btn" title="Upload Asset">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                            <polyline points="17 8 12 3 7 8" />
                            <line x1="12" y1="3" x2="12" y2="15" />
                        </svg>
                    </button>
                    <button id="btn-generated" class="icon-btn" title="Generated Content">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z" />
                            <path d="M12 10v6" />
                            <path d="M9 13h6" />
                        </svg>
                    </button>
                    <input type="file" id="input-upload" style="display: none;" multiple>
                </div>
            </div>

            <nav class="quick-actions">
                <details open>
                    <summary>Launchers</summary>
                    <div class="section-content">
                        <div class="launcher-group">
                            <select id="gemini-model-select" class="model-select">
                                <option value="">Auto (Gemini 3)</option>
                                <option value="gemini-3.1-pro-preview">Gemini 3.1 Pro (Preview)</option>
                                <option value="gemini-3-flash-preview">Gemini 3 Flash (Preview)</option>
                                <option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
                                <option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
                                <option value="gemini-2.5-flash-lite">Gemini 2.5 Flash Lite</option>
                            </select>
                            <button class="action-btn primary" id="btn-gemini">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path
                                        d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z" />
                                </svg>
                                Start Gemini CLI
                            </button>
                        </div>
                        <button class="action-btn secondary" id="btn-claude">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M12 2v20" />
                                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" />
                            </svg>
                            Start Claude Code
                        </button>
                    </div>
                </details>

                <details>
                    <summary>Local LLMs (Ollama)</summary>
                    <div class="section-content">
                        <div class="launcher-group">
                            <select id="local-model-select" class="model-select">
                                <option value="deepseek-r1:1.5b">DeepSeek R1 (1.5b)</option>
                                <option value="deepseek-r1:7b">DeepSeek R1 (7b)</option>
                                <option value="llama3:8b">Llama 3 (8b)</option>
                                <option value="mistral:7b">Mistral (7b)</option>
                                <option value="codellama:7b">CodeLlama (7b)</option>
                                <option value="phi3:3.8b">Phi-3 (3.8b)</option>
                                <option value="custom">Custom Model...</option>
                            </select>
                            <div style="display: flex; gap: 0.5rem;">
                                <button class="action-btn primary" id="btn-run-local" style="flex: 1; border-color: rgba(16, 185, 129, 0.3); background: rgba(16, 185, 129, 0.1);">
                                    Run
                                </button>
                                <button class="action-btn secondary" id="btn-pull-local" style="flex: 1;">
                                    Pull
                                </button>
                            </div>
                        </div>
                    </div>
                </details>

                <details>
                    <summary>Memory & Context</summary>
                    <div class="section-content">
                        <button class="action-btn memory" id="btn-commit">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M14 3v4a1 1 0 0 0 1 1h4" />
                                <path d="M17 21H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7l5 5v11a2 2 0 0 1-2 2z" />
                                <path d="m9 15 2 2 4-4" />
                            </svg>
                            Commit to Memory
                        </button>
                    </div>
                </details>

                <details>
                    <summary>Agents</summary>
                    <div class="section-content">
                        <div class="header-title">
                            <p class="help-text" style="margin-bottom: 0;">Your custom AI personas.</p>
                            <button id="btn-add-agent" class="icon-btn" title="Create New Agent">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <line x1="12" y1="5" x2="12" y2="19"></line>
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                </svg>
                            </button>
                        </div>
                        <div class="agents-list" id="agents-list">
                            <!-- Agents will be injected here -->
                        </div>
                    </div>
                </details>

                <details>
                    <summary>Model Usage (Est.)</summary>
                    <div class="section-content">
                        <div class="usage-stats">
                            <div class="usage-item">
                                <div class="usage-info">
                                    <span class="usage-label">Gemini 3 (Series)</span>
                                    <span class="usage-value">15 RPM / 1M TPM</span>
                                </div>
                                <div class="usage-bar"><div class="usage-fill" id="usage-gemini-3" style="width: 0%"></div></div>
                            </div>
                            <div class="usage-item">
                                <div class="usage-info">
                                    <span class="usage-label">Gemini 2.5 (Series)</span>
                                    <span class="usage-value">5 RPM / 128K TPM</span>
                                </div>
                                <div class="usage-bar"><div class="usage-fill" id="usage-gemini-2-5" style="width: 0%"></div></div>
                            </div>
                            <div class="usage-item">
                                <div class="usage-info">
                                    <span class="usage-label">Claude 3.5 Sonnet</span>
                                    <span class="usage-value">Ready</span>
                                </div>
                                <div class="usage-bar"><div class="usage-fill" id="usage-claude" style="width: 100%"></div></div>
                            </div>
                        </div>
                    </div>
                </details>

                <details>
                    <summary>Utilities</summary>
                    <div class="section-content">
                        <button class="action-btn danger" id="btn-clear">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M3 6h18" />
                                <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6" />
                                <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2" />
                                <line x1="10" x2="10" y1="11" y2="17" />
                                <line x1="14" x2="14" y1="11" y2="17" />
                            </svg>
                            Clear Terminal
                        </button>
                    </div>
                </details>
            </nav>
        </aside>

        <!-- Main Terminal Area -->
        <main class="terminal-section">
            <div class="terminal-header">
                <button id="btn-toggle-sidebar" class="icon-btn sidebar-toggle" title="Toggle Sidebar">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                </button>
                <div class="window-controls">
                    <span class="control close"></span>
                    <span class="control minimize"></span>
                    <span class="control maximize"></span>
                </div>
                <div class="terminal-tabs" id="terminal-tabs">
                    <div class="tab active" data-tab-id="default">
                        <span class="tab-title">Main Terminal</span>
                        <button class="tab-close-btn">&times;</button>
                    </div>
                </div>
                <button id="btn-add-tab" class="icon-btn add-tab-btn" title="Open New Chat/Agent">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                </button>
            </div>
            <div id="terminal-container"></div>
        </main>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settings-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Workspace Settings</h3>
                <button class="close-btn" id="btn-close-settings">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Workspace Explorer</label>
                    <p class="help-text">Click folders to browse. Assign workspaces to automatically isolate context.
                    </p>

                    <div class="browser-container">
                        <div class="browser-header">
                            <button id="btn-up-dir" class="action-btn small secondary" title="Go Up One Directory">â†‘
                                Up</button>
                            <input type="text" id="input-browser-path" class="browser-path-input" readonly
                                autocomplete="off">
                        </div>
                        <div class="browser-list" id="browser-list">
                            <!-- Folders inject here -->
                        </div>
                        <div class="browser-actions">
                            <input type="text" id="input-new-folder" placeholder="New folder name..."
                                autocomplete="off">
                            <button id="btn-create-folder" class="action-btn small primary">Create</button>
                        </div>
                    </div>
                </div>

                <div class="form-group workspace-assignments">
                    <h4>Current Assignments</h4>
                    <div class="assignment-row">
                        <span class="model-badge gemini">Gemini</span>
                        <input type="text" id="input-gemini-path" readonly placeholder="Default Workspace (~) ">
                        <button class="action-btn small primary" id="btn-assign-gemini">Assign Focus</button>
                    </div>
                    <div class="assignment-row">
                        <span class="model-badge claude">Claude</span>
                        <input type="text" id="input-claude-path" readonly placeholder="Default Workspace (~)">
                        <button class="action-btn small secondary" id="btn-assign-claude">Assign Focus</button>
                    </div>
                </div>

                <div class="form-group" style="border-top: 1px solid var(--border-color); padding-top: 1rem;">
                    <button class="action-btn danger small" id="btn-restart-term">Force Restart Terminal
                        Process</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Agent Modal -->
    <div class="modal-overlay" id="agent-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create New Agent</h3>
                <button class="close-btn" id="btn-close-agent">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Agent Name</label>
                    <div class="input-row">
                        <input type="text" id="input-agent-name" placeholder="e.g., Code Reviewer">
                    </div>
                </div>
                <div class="form-group">
                    <label>Base Model</label>
                    <select id="select-agent-model" class="model-select">
                        <option value="">Auto (Gemini 3)</option>
                        <option value="gemini-3.1-pro-preview">Gemini 3.1 Pro (Preview)</option>
                        <option value="gemini-3-flash-preview">Gemini 3 Flash (Preview)</option>
                        <option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
                        <option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
                        <option value="gemini-2.5-flash-lite">Gemini 2.5 Flash Lite</option>
                        <option value="claude">Claude 3.5 Sonnet</option>
                    </select>
                </div>
                <div class="form-group textarea-group">
                    <label>System Instructions (Prompt)</label>
                    <textarea id="input-agent-prompt" placeholder="Define the agent's behavior, expertise, and tone..."></textarea>
                </div>
                <div class="form-group">
                    <button class="action-btn primary" id="btn-save-agent">Create Agent</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Generated Content Modal -->
    <div class="modal-overlay" id="generated-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Generated Content</h3>
                <button class="close-btn" id="btn-close-generated">&times;</button>
            </div>
            <div class="modal-body">
                <p class="help-text">Files generated by AI models in the current workspace.</p>
                <div class="browser-list" id="generated-list">
                    <!-- Files inject here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.8.0/lib/xterm-addon-fit.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-web-links@0.9.0/lib/xterm-addon-web-links.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="main.js?v=1.1"></script>
</body>

</html>